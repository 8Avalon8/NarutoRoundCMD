# 火影忍者OL - 回合制战斗系统

这是一个基于火影忍者OL战斗系统设计的回合制战斗游戏演示程序。它实现了设计文档中描述的核心战斗机制，包括回合制战斗、连击系统、Buff/Debuff机制和查克拉资源管理等。

## 功能特性

- **回合制战斗系统**：基于速度属性的回合顺序，支持多人对战
- **角色系统**：支持自定义角色属性、技能和特性
- **技能系统**：多种技能类型（伤害、治疗、增益、减益）和目标选择方式
- **状态效果系统**：完整的Buff/Debuff机制，支持各种状态效果
- **连击系统**：基于速度和角色特性的连击机制
- **查克拉资源管理**：技能消耗和回合恢复机制
- **事件系统**：完善的战斗事件响应和处理
- **控制台UI界面**：简单直观的文字界面和动画效果

## 目录结构

```
naruto_battle_system/
├── config/             - 配置相关
├── controllers/        - 控制器层
├── data/               - 数据存储层
├── interfaces/         - 接口定义
├── models/             - 数据模型
├── services/           - 服务层
├── tests/              - 测试文件
├── utils/              - 工具类
├── views/              - 视图层
├── game.py             - 游戏主逻辑
├── main.py             - 入口点
└── README.md           - 说明文档
```

## 核心模块

- **模型层 (models)**: 定义了角色、技能、状态效果等游戏对象
- **控制器层 (controllers)**: 处理游戏逻辑和用户输入
- **视图层 (views)**: 负责显示游戏状态和界面
- **服务层 (services)**: 提供业务逻辑和数据管理
- **数据层 (data)**: 处理数据的持久化和加载
- **工具类 (utils)**: 提供通用功能和辅助工具
- **配置 (config)**: 管理游戏配置和设置

## 战斗机制

1. **回合制战斗**：
   - 角色按速度从高到低行动
   - 每回合自动恢复一定量的查克拉
   - 回合开始时处理状态效果

2. **攻击机制**：
   - 基础攻击：消耗0查克拉，造成基于攻击力的伤害
   - 技能攻击：消耗特定查克拉，造成不同效果

3. **连击系统**：
   - 角色攻击后有一定概率触发连击
   - 连击概率与角色速度和特性相关

4. **状态效果**：
   - 增益效果：提高属性、恢复生命等
   - 减益效果：降低属性、持续伤害等
   - 控制效果：眩晕、冰冻等限制行动的效果

## 运行方法

1. 确保已安装Python 3.6或更高版本

2. 运行游戏:

```bash
python -m naruto_battle_system.main
```

## 操作说明

游戏中可用的命令:

- `attack/a [目标ID]` - 对指定目标进行普通攻击
- `skill/s [技能ID] [目标ID]` - 使用指定技能攻击指定目标
- `item/i [道具ID] [目标ID]` - 使用指定道具（尚未实现）
- `pass/p` - 跳过当前回合
- `status/st` - 显示战斗状态
- `help/h` - 显示帮助信息

## 测试

运行测试:

```bash
python -m unittest discover -s naruto_battle_system/tests
```

## 扩展性

本系统设计时考虑了良好的扩展性：

- 通过接口定义和依赖注入实现模块解耦
- 使用事件系统实现松耦合的组件交互
- 配置文件支持自定义游戏参数
- 数据存储层可替换为不同的实现

## TODO

- 实现道具系统
- 添加更多角色和技能
- 实现对战模式和AI难度选择
- 添加图形界面
- 添加网络对战功能 